{"remainingRequest":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\pictureHosting\\TxyunManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\pictureHosting\\TxyunManage.vue","mtime":1675543272000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTdmdJY29uIGZyb20gIkAvY29tcG9uZW50cy9TdmdJY29uIjsKaW1wb3J0IHtpc0ltZ0V4dH0gZnJvbSAiQC91dGlsL3ZhbGlkYXRlIjsKaW1wb3J0IHtyYW5kb21VVUlEfSBmcm9tICJAL3V0aWwvdXVpZCI7CmltcG9ydCB7Y29weX0gZnJvbSAiQC91dGlsL2NvcHkiOwppbXBvcnQgQ09TIGZyb20gJ2Nvcy1qcy1zZGstdjUnOwoKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogIlR4eXVuTWFuYWdlIiwKCWNvbXBvbmVudHM6IHtTdmdJY29ufSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJY29zOiB7fSwKCQkJdHh5dW5Db25maWc6IHsKCQkJCXNlY3JldElkOiAnJywKCQkJCXNlY3JldEtleTogJycsCgkJCQlidWNrZXROYW1lOiAnJywKCQkJCXJlZ2lvbjogJycsCgkJCQlkb21haW46ICcnCgkJCX0sCgkJCXBhdGhBcnI6IFt7dmFsdWU6ICcnLCBsYWJlbDogJ+agueebruW9lSd9XSwKCQkJYWN0aXZlUGF0aDogWycnXSwvL+m7mOiupOmAieS4reagueebruW9lQoJCQlwYXRoUHJvcHM6IHsKCQkJCWxhenk6IHRydWUsCgkJCQljaGVja1N0cmljdGx5OiB0cnVlLAoJCQkJbGF6eUxvYWQ6IGFzeW5jIChub2RlLCByZXNvbHZlKSA9PiB7CgkJCQkJbGV0IHBhdGggPSBub2RlLnBhdGguam9pbignLycpCgkJCQkJcGF0aCA9IHBhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGgKCQkJCQlpZiAocGF0aCAhPSAnJykgewoJCQkJCQlwYXRoID0gcGF0aC5lbmRzV2l0aCgnLycpID8gcGF0aCA6IGAke3BhdGh9L2AKCQkJCQl9CgkJCQkJbGV0IG5vZGVzID0gW10KCQkJCQlhd2FpdCB0aGlzLmdldFJlcG9zQ29udGVudHMobm9kZXMsIHBhdGgpCgkJCQkJcmVzb2x2ZShub2RlcykKCQkJCX0KCQkJfSwKCQkJaGludFNob3cxOiB0cnVlLAoJCQloaW50U2hvdzI6IHRydWUsCgkJCWZpbGVMaXN0OiBbXSwKCQkJaXNEcmF3ZXJTaG93OiBmYWxzZSwKCQkJbmFtZVR5cGU6ICcxJywKCQkJdXBsb2FkTGlzdDogW10sCgkJCWlzQ3VzdG9tUGF0aDogZmFsc2UsCgkJCWN1c3RvbVBhdGg6ICcnLAoJCX0KCX0sCgljb21wdXRlZDogewoJCXJlYWxQYXRoKCkgewoJCQlpZiAodGhpcy5pc0N1c3RvbVBhdGgpIHsKCQkJCXJldHVybiBgJHt0aGlzLmN1c3RvbVBhdGh9YAoJCQl9CgkJCWxldCBwYXRoID0gdGhpcy5hY3RpdmVQYXRoLmpvaW4oJy8nKQoJCQlwYXRoID0gcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aAoJCQlpZiAocGF0aCAhPSAnJykgewoJCQkJcmV0dXJuIGAke3BhdGh9L2AKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBgJHtwYXRofWAKCQkJfQoJCX0KCX0sCgljcmVhdGVkKCkgewoJCXRoaXMuaGludFNob3cxID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3R4eXVuSGludFNob3cxJykgPyBmYWxzZSA6IHRydWUKCQl0aGlzLmhpbnRTaG93MiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0eHl1bkhpbnRTaG93MicpID8gZmFsc2UgOiB0cnVlCgoJCWNvbnN0IHR4eXVuQ29uZmlnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3R4eXVuQ29uZmlnJykKCQlpZiAodHh5dW5Db25maWcpIHsKCQkJdGhpcy50eHl1bkNvbmZpZyA9IEpTT04ucGFyc2UodHh5dW5Db25maWcpCgkJCXRoaXMudHh5dW5Db25maWcuZG9tYWluID0gdGhpcy50eHl1bkNvbmZpZy5kb21haW4uZW5kc1dpdGgoJy8nKSA/IHRoaXMudHh5dW5Db25maWcuZG9tYWluIDogYCR7dGhpcy50eHl1bkNvbmZpZy5kb21haW59L2AKCgkJCXRoaXMuY29zID0gbmV3IENPUyh7CgkJCQlTZWNyZXRJZDogdGhpcy50eHl1bkNvbmZpZy5zZWNyZXRJZCwKCQkJCVNlY3JldEtleTogdGhpcy50eHl1bkNvbmZpZy5zZWNyZXRLZXksCgkJCX0pCgkJfSBlbHNlIHsKCQkJdGhpcy5tc2dFcnJvcign6K+35YWI6YWN572u6IW+6K6v5LqRJykKCQkJdGhpcy4kcm91dGVyLnB1c2goJy9waWN0dXJlSG9zdGluZy9zZXR0aW5nJykKCQl9Cgl9LAoJbWV0aG9kczogewoJCS8v5o2i5oiQ5oeS5Yqg6L29CgkJYXN5bmMgZ2V0UmVwb3NDb250ZW50cyhhcnIsIHBhdGgpIHsKCQkJY29uc3Qge3R4eXVuQ29uZmlnfSA9IHRoaXMKCQkJYXdhaXQgdGhpcy5jb3MuZ2V0QnVja2V0KHsKCQkJCUJ1Y2tldDogdHh5dW5Db25maWcuYnVja2V0TmFtZSwgLyog5b+F6aG7ICovCgkJCQlSZWdpb246IHR4eXVuQ29uZmlnLnJlZ2lvbiwgICAgIC8qIOWtmOWCqOahtuaJgOWcqOWcsOWfn++8jOW/hemhu+Wtl+autSAqLwoJCQkJUHJlZml4OiBwYXRoLCAgICAgICAgICAgLyog6Z2e5b+F6aG7ICovCgkJCQlEZWxpbWl0ZXI6ICcvJwoJCQl9KS50aGVuKGRhdGEgPT4gewoJCQkJZGF0YS5Db21tb25QcmVmaXhlcy5mb3JFYWNoKChpdGVtKSA9PiB7CgkJCQkJaXRlbS5uYW1lID0gaXRlbS5QcmVmaXgucmVwbGFjZShwYXRoLCAnJykuc2xpY2UoMCwgLTEpCgkJCQkJLy/orqnmiYDmnInoioLngrnpg73mmK/pnZ7lj7blrZDoioLngrkKCQkJCQlhcnIucHVzaCh7dmFsdWU6IGl0ZW0ubmFtZSwgbGFiZWw6IGl0ZW0ubmFtZSwgbGVhZjogZmFsc2V9KQoJCQkJfSk7CgkJCX0pCgkJfSwKCQkvLyDojrflj5blrZjlgqjnqbrpl7TkuIvmjIflrprnm67lvZXnmoTmlofku7bliJfooagKCQlzZWFyY2goKSB7CgkJCWNvbnN0IHt0eHl1bkNvbmZpZ30gPSB0aGlzCgkJCWNvbnN0IGZpbGVMaXN0ID0gW10KCQkJbGV0IHBhdGggPSB0aGlzLmFjdGl2ZVBhdGguam9pbignLycpCgkJCXBhdGggPSBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRoCgkJCWlmIChwYXRoICE9ICcnKSB7CgkJCQlwYXRoID0gcGF0aC5lbmRzV2l0aCgnLycpID8gcGF0aCA6IGAke3BhdGh9L2AKCQkJfQoJCQl0aGlzLmNvcy5nZXRCdWNrZXQoewoJCQkJQnVja2V0OiB0eHl1bkNvbmZpZy5idWNrZXROYW1lLCAvKiDlv4XpobsgKi8KCQkJCVJlZ2lvbjogdHh5dW5Db25maWcucmVnaW9uLCAgICAgLyog5a2Y5YKo5qG25omA5Zyo5Zyw5Z+f77yM5b+F6aG75a2X5q61ICovCgkJCQlQcmVmaXg6IHBhdGgsICAgICAgICAgICAvKiDpnZ7lv4XpobsgKi8KCQkJCURlbGltaXRlcjogJy8nCgkJCX0pLnRoZW4oZGF0YSA9PiB7CgkJCQlkYXRhLkNvbnRlbnRzLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uS2V5LmVuZHNXaXRoKCcvJykgJiYgaXNJbWdFeHQoaXRlbS5LZXkpKS5mb3JFYWNoKGl0ZW0gPT4gewoJCQkJCWl0ZW0ucGF0aCA9IGl0ZW0uS2V5CgkJCQkJaXRlbS5jZG5fdXJsID0gYCR7dHh5dW5Db25maWcuZG9tYWlufSR7aXRlbS5wYXRofWAKCQkJCQlpdGVtLm5hbWUgPSBpdGVtLktleS5yZXBsYWNlKHBhdGgsICcnKQoJCQkJCWZpbGVMaXN0LnB1c2goaXRlbSkKCQkJCX0pCgkJCX0pCgkJCXRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdAoJCX0sCgkJbm9EaXNwbGF5KGlkKSB7CgkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKGB0eHl1bkhpbnRTaG93JHtpZH1gLCAnMScpCgkJfSwKCQljb3B5KHR5cGUsIGZpbGUpIHsKCQkJLy8gdHlwZSAxIGNkbiBsaW5rICAyIE1hcmtkb3duCgkJCWxldCBjb3B5Q29udCA9ICcnCgkJCWlmICh0eXBlID09IDEpIHsKCQkJCWNvcHlDb250ID0gZmlsZS5jZG5fdXJsCgkJCX0gZWxzZSBpZiAodHlwZSA9PSAyKSB7CgkJCQljb3B5Q29udCA9IGAhWyR7ZmlsZS5uYW1lfV0oJHtmaWxlLmNkbl91cmx9KWAKCQkJfQoJCQljb3B5KGNvcHlDb250KQoJCQl0aGlzLm1zZ1N1Y2Nlc3MoJ+WkjeWItuaIkOWKnycpCgkJfSwKCQkvLyDliKDpmaTmlofku7YKCQlkZWxGaWxlKGZpbGUpIHsKCQkJY29uc3Qge3R4eXVuQ29uZmlnfSA9IHRoaXMKCQkJdGhpcy4kY29uZmlybSgi5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbliKDpmaQ/IiwgIuaPkOekuiIsIHsKCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJdHlwZTogJ3dhcm5pbmcnLAoJCQl9KS50aGVuKCgpID0+IHsKCQkJCXRoaXMuY29zLmRlbGV0ZU9iamVjdCh7CgkJCQkJQnVja2V0OiB0eHl1bkNvbmZpZy5idWNrZXROYW1lLCAvKiDloavlhpnoh6rlt7HnmoRidWNrZXTvvIzlv4XpobvlrZfmrrUgKi8KCQkJCQlSZWdpb246IHR4eXVuQ29uZmlnLnJlZ2lvbiwgICAgIC8qIOWtmOWCqOahtuaJgOWcqOWcsOWfn++8jOW/hemhu+Wtl+autSAqLwoJCQkJCUtleTogZmlsZS5wYXRoLCAgICAgICAgICAgICAgLyog5a2Y5YKo5Zyo5qG26YeM55qE5a+56LGh6ZSu77yI5L6L5aaCMS5qcGfvvIxhL2IvdGVzdC50eHTvvInvvIzlv4XpobvlrZfmrrUgKi8KCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMubXNnU3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKCQkJCQl0aGlzLnNlYXJjaCgpCgkJCQl9KS5jYXRjaCgoKSA9PiB7CgkJCQkJdGhpcy5tc2dFcnJvcign5Yig6Zmk5aSx6LSlJykKCQkJCX0pCgkJCX0pLmNhdGNoKCgpID0+IHsKCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCXR5cGU6ICdpbmZvJywKCQkJCQltZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJywKCQkJCX0pCgkJCX0pCgkJfSwKCQlzdWJtaXRVcGxvYWQoKSB7CgkJCS8vaHR0cHM6Ly9naXRodWIuY29tL0VsZW1lRkUvZWxlbWVudC9pc3N1ZXMvMTIwODAKCQkJdGhpcy51cGxvYWRMaXN0ID0gdGhpcy4kcmVmcy51cGxvYWRSZWYudXBsb2FkRmlsZXMKCQkJaWYgKHRoaXMudXBsb2FkTGlzdC5sZW5ndGgpIHsKCQkJCS8v6Kem5Y+RIGVsLXVwbG9hZCDkuK0gaHR0cC1yZXF1ZXN0IOe7keWumueahOWHveaVsAoJCQkJdGhpcy4kcmVmcy51cGxvYWRSZWYuc3VibWl0KCkKCQkJfSBlbHNlIHsKCQkJCXRoaXMubXNnRXJyb3IoJ+ivt+WFiOmAieaLqeaWh+S7ticpCgkJCX0KCQl9LAoJCXVwbG9hZChkYXRhKSB7CgkJCWxldCBmaWxlTmFtZSA9IGRhdGEuZmlsZS5uYW1lCgkJCWlmICh0aGlzLm5hbWVUeXBlID09PSAnMicpIHsKCQkJCWZpbGVOYW1lID0gcmFuZG9tVVVJRCgpICsgZmlsZU5hbWUuc3Vic3RyKGZpbGVOYW1lLmxhc3RJbmRleE9mKCIuIikpCgkJCX0KCQkJY29uc3Qge3R4eXVuQ29uZmlnfSA9IHRoaXMKCQkJbGV0IHBhdGggPSB0aGlzLnJlYWxQYXRoOwoJCQlwYXRoID0gcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aAoJCQlwYXRoID0gcGF0aC5lbmRzV2l0aCgnLycpID8gcGF0aCA6IGAke3BhdGh9L2AKCQkJdGhpcy5jb3MudXBsb2FkRmlsZSh7CgkJCQlCdWNrZXQ6IHR4eXVuQ29uZmlnLmJ1Y2tldE5hbWUsIC8qIOW/hemhuyAqLwoJCQkJUmVnaW9uOiB0eHl1bkNvbmZpZy5yZWdpb24sICAgICAvKiDlrZjlgqjmobbmiYDlnKjlnLDln5/vvIzlv4XpobvlrZfmrrUgKi8KCQkJCUtleTogYCR7cGF0aH0ke2ZpbGVOYW1lfWAsICAgICAgICAgICAgICAvKiDlrZjlgqjlnKjmobbph4znmoTlr7nosaHplK7vvIjkvovlpoI6MS5qcGfvvIxhL2IvdGVzdC50eHTvvIzlm77niYcuanBn77yJ5pSv5oyB5Lit5paH77yM5b+F6aG75a2X5q61ICovCgkJCQlCb2R5OiBkYXRhLmZpbGUsIC8vIOS4iuS8oOaWh+S7tuWvueixoQoJCQkJU2xpY2VTaXplOiAxMDI0ICogMTAyNCAqIDUsICAgICAvKiDop6blj5HliIblnZfkuIrkvKDnmoTpmIjlgLzvvIzotoXov4c1TULkvb/nlKjliIblnZfkuIrkvKDvvIzlsI/kuo41TULkvb/nlKjnroDljZXkuIrkvKDjgILlj6/oh6rooYzorr7nva7vvIzpnZ7lv4XpobsgKi8KCQkJCW9uUHJvZ3Jlc3M6IGZ1bmN0aW9uIChwcm9ncmVzc0RhdGEpIHsKCQkJCQljb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShwcm9ncmVzc0RhdGEpKTsKCQkJCX0KCQkJfSkudGhlbigoKSA9PiB7CgkJCQl0aGlzLm1zZ1N1Y2Nlc3MoJ+S4iuS8oOaIkOWKnycpCgkJCQlkYXRhLm9uU3VjY2VzcygpCgkJCX0pCgkJfSwKCX0sCn0K"},{"version":3,"sources":["TxyunManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TxyunManage.vue","sourceRoot":"src/views/pictureHosting","sourcesContent":["<template>\n\t<div>\n\t\t<el-row>\n\t\t\t<el-select v-model=\"txyunConfig.bucketName\" disabled style=\"min-width: 200px\"></el-select>\n\t\t\t<el-cascader v-model=\"activePath\" placeholder=\"请选择目录\" :options=\"pathArr\" :props=\"pathProps\" style=\"min-width: 450px\"></el-cascader>\n\t\t\t<el-button type=\"primary\" size=\"medium\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\n\t\t\t<el-button class=\"right-item\" type=\"primary\" size=\"medium\" icon=\"el-icon-upload\" @click=\"isDrawerShow=!isDrawerShow\">上传</el-button>\n\t\t</el-row>\n\t\t<el-alert title=\"只显示<img>标签支持的 apng,avif,bmp,gif,ico,cur,jpg,jpeg,jfif,pjpeg,pjp,png,svg,tif,tiff,webp 格式的图片，见 https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img\" type=\"warning\" show-icon close-text=\"不再提示\" v-if=\"hintShow1\" @close=\"noDisplay(1)\"></el-alert>\n\t\t<el-alert title=\"最多显示100个文件\" type=\"warning\" show-icon close-text=\"不再提示\" v-if=\"hintShow2\" @close=\"noDisplay(2)\"></el-alert>\n\t\t<el-row v-viewer>\n\t\t\t<div class=\"image-container\" v-for=\"(file,index) in fileList\" :key=\"index\">\n\t\t\t\t<el-image :src=\"file.cdn_url\" fit=\"scale-down\"></el-image>\n\t\t\t\t<div class=\"image-content\">\n\t\t\t\t\t<div class=\"info\">\n\t\t\t\t\t\t<span>{{ file.name }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"icons\">\n\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"复制CDN链接\" placement=\"bottom\">\n\t\t\t\t\t\t\t<i class=\"icon el-icon-link\" @click=\"copy(1,file)\"></i>\n\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"复制MD格式\" placement=\"bottom\">\n\t\t\t\t\t\t\t<SvgIcon icon-class=\"markdown\" class-name=\"icon\" @click=\"copy(2,file)\"></SvgIcon>\n\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t<i class=\"icon el-icon-delete\" @click=\"delFile(file)\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-row>\n\n\t\t<el-drawer title=\"上传文件\" :visible.sync=\"isDrawerShow\" direction=\"rtl\" size=\"40%\" :wrapperClosable=\"false\" :close-on-press-escape=\"false\">\n\t\t\t<el-row>\n\t\t\t\t<el-radio v-model=\"nameType\" label=\"1\">使用源文件名</el-radio>\n\t\t\t\t<el-radio v-model=\"nameType\" label=\"2\">使用UUID文件名</el-radio>\n\t\t\t\t<el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\" v-throttle=\"[submitUpload,`click`,3000]\">确定上传</el-button>\n\t\t\t</el-row>\n\t\t\t<el-row>\n\t\t\t\t当前目录：{{ realPath }}\n\t\t\t</el-row>\n\t\t\t<el-row>\n\t\t\t\t<el-switch v-model=\"isCustomPath\" active-text=\"自定义目录\"></el-switch>\n\t\t\t\t<el-input placeholder=\"例：oldFolder/newFolder/\" v-model=\"customPath\" :disabled=\"!isCustomPath\" size=\"medium\" style=\"margin-top: 10px\"></el-input>\n\t\t\t</el-row>\n\t\t\t<el-upload ref=\"uploadRef\" action=\"\" :http-request=\"upload\" drag multiple :file-list=\"uploadList\" list-type=\"picture\" :auto-upload=\"false\">\n\t\t\t\t<i class=\"el-icon-upload\"></i>\n\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n\t\t\t</el-upload>\n\t\t</el-drawer>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from \"@/components/SvgIcon\";\nimport {isImgExt} from \"@/util/validate\";\nimport {randomUUID} from \"@/util/uuid\";\nimport {copy} from \"@/util/copy\";\nimport COS from 'cos-js-sdk-v5';\n\nexport default {\n\tname: \"TxyunManage\",\n\tcomponents: {SvgIcon},\n\tdata() {\n\t\treturn {\n\t\t\tcos: {},\n\t\t\ttxyunConfig: {\n\t\t\t\tsecretId: '',\n\t\t\t\tsecretKey: '',\n\t\t\t\tbucketName: '',\n\t\t\t\tregion: '',\n\t\t\t\tdomain: ''\n\t\t\t},\n\t\t\tpathArr: [{value: '', label: '根目录'}],\n\t\t\tactivePath: [''],//默认选中根目录\n\t\t\tpathProps: {\n\t\t\t\tlazy: true,\n\t\t\t\tcheckStrictly: true,\n\t\t\t\tlazyLoad: async (node, resolve) => {\n\t\t\t\t\tlet path = node.path.join('/')\n\t\t\t\t\tpath = path.startsWith('/') ? path.slice(1) : path\n\t\t\t\t\tif (path != '') {\n\t\t\t\t\t\tpath = path.endsWith('/') ? path : `${path}/`\n\t\t\t\t\t}\n\t\t\t\t\tlet nodes = []\n\t\t\t\t\tawait this.getReposContents(nodes, path)\n\t\t\t\t\tresolve(nodes)\n\t\t\t\t}\n\t\t\t},\n\t\t\thintShow1: true,\n\t\t\thintShow2: true,\n\t\t\tfileList: [],\n\t\t\tisDrawerShow: false,\n\t\t\tnameType: '1',\n\t\t\tuploadList: [],\n\t\t\tisCustomPath: false,\n\t\t\tcustomPath: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\trealPath() {\n\t\t\tif (this.isCustomPath) {\n\t\t\t\treturn `${this.customPath}`\n\t\t\t}\n\t\t\tlet path = this.activePath.join('/')\n\t\t\tpath = path.startsWith('/') ? path.slice(1) : path\n\t\t\tif (path != '') {\n\t\t\t\treturn `${path}/`\n\t\t\t} else {\n\t\t\t\treturn `${path}`\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.hintShow1 = localStorage.getItem('txyunHintShow1') ? false : true\n\t\tthis.hintShow2 = localStorage.getItem('txyunHintShow2') ? false : true\n\n\t\tconst txyunConfig = localStorage.getItem('txyunConfig')\n\t\tif (txyunConfig) {\n\t\t\tthis.txyunConfig = JSON.parse(txyunConfig)\n\t\t\tthis.txyunConfig.domain = this.txyunConfig.domain.endsWith('/') ? this.txyunConfig.domain : `${this.txyunConfig.domain}/`\n\n\t\t\tthis.cos = new COS({\n\t\t\t\tSecretId: this.txyunConfig.secretId,\n\t\t\t\tSecretKey: this.txyunConfig.secretKey,\n\t\t\t})\n\t\t} else {\n\t\t\tthis.msgError('请先配置腾讯云')\n\t\t\tthis.$router.push('/pictureHosting/setting')\n\t\t}\n\t},\n\tmethods: {\n\t\t//换成懒加载\n\t\tasync getReposContents(arr, path) {\n\t\t\tconst {txyunConfig} = this\n\t\t\tawait this.cos.getBucket({\n\t\t\t\tBucket: txyunConfig.bucketName, /* 必须 */\n\t\t\t\tRegion: txyunConfig.region,     /* 存储桶所在地域，必须字段 */\n\t\t\t\tPrefix: path,           /* 非必须 */\n\t\t\t\tDelimiter: '/'\n\t\t\t}).then(data => {\n\t\t\t\tdata.CommonPrefixes.forEach((item) => {\n\t\t\t\t\titem.name = item.Prefix.replace(path, '').slice(0, -1)\n\t\t\t\t\t//让所有节点都是非叶子节点\n\t\t\t\t\tarr.push({value: item.name, label: item.name, leaf: false})\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\t// 获取存储空间下指定目录的文件列表\n\t\tsearch() {\n\t\t\tconst {txyunConfig} = this\n\t\t\tconst fileList = []\n\t\t\tlet path = this.activePath.join('/')\n\t\t\tpath = path.startsWith('/') ? path.slice(1) : path\n\t\t\tif (path != '') {\n\t\t\t\tpath = path.endsWith('/') ? path : `${path}/`\n\t\t\t}\n\t\t\tthis.cos.getBucket({\n\t\t\t\tBucket: txyunConfig.bucketName, /* 必须 */\n\t\t\t\tRegion: txyunConfig.region,     /* 存储桶所在地域，必须字段 */\n\t\t\t\tPrefix: path,           /* 非必须 */\n\t\t\t\tDelimiter: '/'\n\t\t\t}).then(data => {\n\t\t\t\tdata.Contents.filter((item) => !item.Key.endsWith('/') && isImgExt(item.Key)).forEach(item => {\n\t\t\t\t\titem.path = item.Key\n\t\t\t\t\titem.cdn_url = `${txyunConfig.domain}${item.path}`\n\t\t\t\t\titem.name = item.Key.replace(path, '')\n\t\t\t\t\tfileList.push(item)\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.fileList = fileList\n\t\t},\n\t\tnoDisplay(id) {\n\t\t\tlocalStorage.setItem(`txyunHintShow${id}`, '1')\n\t\t},\n\t\tcopy(type, file) {\n\t\t\t// type 1 cdn link  2 Markdown\n\t\t\tlet copyCont = ''\n\t\t\tif (type == 1) {\n\t\t\t\tcopyCont = file.cdn_url\n\t\t\t} else if (type == 2) {\n\t\t\t\tcopyCont = `![${file.name}](${file.cdn_url})`\n\t\t\t}\n\t\t\tcopy(copyCont)\n\t\t\tthis.msgSuccess('复制成功')\n\t\t},\n\t\t// 删除文件\n\t\tdelFile(file) {\n\t\t\tconst {txyunConfig} = this\n\t\t\tthis.$confirm(\"此操作将永久删除该文件, 是否删除?\", \"提示\", {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning',\n\t\t\t}).then(() => {\n\t\t\t\tthis.cos.deleteObject({\n\t\t\t\t\tBucket: txyunConfig.bucketName, /* 填写自己的bucket，必须字段 */\n\t\t\t\t\tRegion: txyunConfig.region,     /* 存储桶所在地域，必须字段 */\n\t\t\t\t\tKey: file.path,              /* 存储在桶里的对象键（例如1.jpg，a/b/test.txt），必须字段 */\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.msgSuccess('删除成功')\n\t\t\t\t\tthis.search()\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.msgError('删除失败')\n\t\t\t\t})\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$message({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: '已取消删除',\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsubmitUpload() {\n\t\t\t//https://github.com/ElemeFE/element/issues/12080\n\t\t\tthis.uploadList = this.$refs.uploadRef.uploadFiles\n\t\t\tif (this.uploadList.length) {\n\t\t\t\t//触发 el-upload 中 http-request 绑定的函数\n\t\t\t\tthis.$refs.uploadRef.submit()\n\t\t\t} else {\n\t\t\t\tthis.msgError('请先选择文件')\n\t\t\t}\n\t\t},\n\t\tupload(data) {\n\t\t\tlet fileName = data.file.name\n\t\t\tif (this.nameType === '2') {\n\t\t\t\tfileName = randomUUID() + fileName.substr(fileName.lastIndexOf(\".\"))\n\t\t\t}\n\t\t\tconst {txyunConfig} = this\n\t\t\tlet path = this.realPath;\n\t\t\tpath = path.startsWith('/') ? path.slice(1) : path\n\t\t\tpath = path.endsWith('/') ? path : `${path}/`\n\t\t\tthis.cos.uploadFile({\n\t\t\t\tBucket: txyunConfig.bucketName, /* 必须 */\n\t\t\t\tRegion: txyunConfig.region,     /* 存储桶所在地域，必须字段 */\n\t\t\t\tKey: `${path}${fileName}`,              /* 存储在桶里的对象键（例如:1.jpg，a/b/test.txt，图片.jpg）支持中文，必须字段 */\n\t\t\t\tBody: data.file, // 上传文件对象\n\t\t\t\tSliceSize: 1024 * 1024 * 5,     /* 触发分块上传的阈值，超过5MB使用分块上传，小于5MB使用简单上传。可自行设置，非必须 */\n\t\t\t\tonProgress: function (progressData) {\n\t\t\t\t\tconsole.log(JSON.stringify(progressData));\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.msgSuccess('上传成功')\n\t\t\t\tdata.onSuccess()\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style>\n.el-drawer__body {\n\tmargin: 0 20px;\n\toverflow: auto;\n}\n\n.el-drawer__body .el-upload {\n\tmargin-top: 20px;\n}\n\n.el-drawer__body .el-upload, .el-drawer__body .el-upload-dragger {\n\twidth: 100%;\n}\n</style>\n\n<style scoped>\n.el-row + .el-row, .el-row + .el-alert, .el-alert + .el-row {\n\tmargin-top: 20px;\n}\n\n.el-alert + .el-alert {\n\tmargin-top: 10px;\n}\n\n.el-select + .el-cascader, .el-cascader + .el-button, .el-button + .el-switch {\n\tmargin-left: 10px;\n}\n\n.el-switch + .el-button {\n\tmargin-left: 30px;\n}\n\n.image-container {\n\tposition: relative;\n\twidth: 200px;\n\theight: 200px;\n\toverflow: hidden;\n\tdisplay: inline-block;\n\tmargin: 0 2px;\n}\n\n.el-image {\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n.image-content {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.image-content .info {\n\tbackground: linear-gradient(0deg, transparent, rgba(0, 0, 0, .6));\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tpadding: 6px;\n\tfont-size: 12px;\n\tcolor: #fff;\n\topacity: 0;\n\ttransition: opacity 0.5s;\n\tz-index: 2;\n}\n\n.image-content .info span {\n\tword-wrap: break-word;\n}\n\n.image-container:hover .image-content .info {\n\topacity: 1;\n\ttransition-duration: 0.25s;\n}\n\n.icons {\n\tposition: absolute;\n\tright: 8px;\n\tbottom: 8px;\n\tz-index: 2;\n}\n\n.icon {\n\ttext-decoration: none;\n\tfont-size: 22px;\n\tmargin-left: 20px;\n\ttransform: translateY(80px);\n\tcursor: pointer;\n}\n\n.image-container:hover .icon {\n\ttransform: translateY(0px);\n}\n\n.icon:nth-child(1) {\n\ttransition: transform 0.25s 0.05s, color 0.3s;\n}\n\n.icon:nth-child(2) {\n\ttransition: transform 0.25s 0.1s, color 0.3s;\n}\n\n.icon:nth-child(3) {\n\ttransition: transform 0.25s 0.15s, color 0.3s;\n}\n\n.icon:nth-child(1):hover {\n\tcolor: #409EFF;\n}\n\n.icon:nth-child(2):hover {\n\tcolor: #409EFF;\n}\n\n.icon:nth-child(3):hover {\n\tcolor: #F56C6C;\n}\n\n.image-content::before {\n\tcontent: '';\n\tposition: absolute;\n\tleft: 0;\n\tbottom: 0;\n\tbackground: rgba(255, 255, 255, 0.7);\n\twidth: 100%;\n\theight: 0;\n\tclip-path: polygon(0 100%, 100% 0, 100% 100%);\n\ttransition: 0.3s;\n\tz-index: 2;\n}\n\n.image-container:hover .image-content::before {\n\theight: 80px;\n}\n</style>\n"]}]}