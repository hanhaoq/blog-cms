{"remainingRequest":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue","mtime":1675543272000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCcmVhZGNydW1iIGZyb20gIkAvY29tcG9uZW50cy9CcmVhZGNydW1iIjsKaW1wb3J0IHtnZXRDYXRlZ29yeUFuZFRhZywgc2F2ZUJsb2csIGdldEJsb2dCeUlkLCB1cGRhdGVCbG9nfSBmcm9tICdAL2FwaS9ibG9nJwoKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogIldyaXRlQmxvZyIsCgljb21wb25lbnRzOiB7QnJlYWRjcnVtYn0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCWNhdGVnb3J5TGlzdDogW10sCgkJCXRhZ0xpc3Q6IFtdLAoJCQlkaWFsb2dWaXNpYmxlOiBmYWxzZSwKCQkJcmFkaW86IDEsCgkJCWZvcm06IHsKCQkJCXRpdGxlOiAnJywKCQkJCWZpcnN0UGljdHVyZTogJycsCgkJCQlkZXNjcmlwdGlvbjogJycsCgkJCQljb250ZW50OiAnJywKCQkJCWNhdGU6IG51bGwsCgkJCQl0YWdMaXN0OiBbXSwKCQkJCXdvcmRzOiBudWxsLAoJCQkJcmVhZFRpbWU6IG51bGwsCgkJCQl2aWV3czogMCwKCQkJCWFwcHJlY2lhdGlvbjogZmFsc2UsCgkJCQlyZWNvbW1lbmQ6IGZhbHNlLAoJCQkJY29tbWVudEVuYWJsZWQ6IGZhbHNlLAoJCQkJdG9wOiBmYWxzZSwKCQkJCXB1Ymxpc2hlZDogZmFsc2UsCgkJCQlwYXNzd29yZDogJycsCgkJCX0sCgkJCWZvcm1SdWxlczogewoJCQkJdGl0bGU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmoIfpopgnLCB0cmlnZ2VyOiAnY2hhbmdlJ31dLAoJCQkJZmlyc3RQaWN0dXJlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aaW5Zu+6ZO+5o6lJywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwKCQkJCWNhdGU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nliIbnsbsnLCB0cmlnZ2VyOiAnY2hhbmdlJ31dLAoJCQkJdGFnTGlzdDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeagh+etvicsIHRyaWdnZXI6ICdjaGFuZ2UnfV0sCgkJCQl3b3JkczogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+eroOWtl+aVsCcsIHRyaWdnZXI6ICdjaGFuZ2UnfV0sCgkJCX0sCgkJfQoJfSwKCXdhdGNoOiB7CgkJJ2Zvcm0ud29yZHMnKG5ld1ZhbHVlKSB7CgkJCXRoaXMuZm9ybS5yZWFkVGltZSA9IG5ld1ZhbHVlID8gTWF0aC5yb3VuZChuZXdWYWx1ZSAvIDIwMCkgOiBudWxsCgkJfSwKCX0sCgljcmVhdGVkKCkgewoJCXRoaXMuZ2V0RGF0YSgpCgkJaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewoJCQl0aGlzLmdldEJsb2codGhpcy4kcm91dGUucGFyYW1zLmlkKQoJCX0KCX0sCgltZXRob2RzOiB7CgkJZ2V0RGF0YSgpIHsKCQkJZ2V0Q2F0ZWdvcnlBbmRUYWcoKS50aGVuKHJlcyA9PiB7CgkJCQl0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhLmNhdGVnb3JpZXMKCQkJCXRoaXMudGFnTGlzdCA9IHJlcy5kYXRhLnRhZ3MKCQkJfSkKCQl9LAoJCWdldEJsb2coaWQpIHsKCQkJZ2V0QmxvZ0J5SWQoaWQpLnRoZW4ocmVzID0+IHsKCQkJCXRoaXMuY29tcHV0ZUNhdGVnb3J5QW5kVGFnKHJlcy5kYXRhKQoJCQkJdGhpcy5mb3JtID0gcmVzLmRhdGEKCQkJCXRoaXMucmFkaW8gPSB0aGlzLmZvcm0ucHVibGlzaGVkID8gKHRoaXMuZm9ybS5wYXNzd29yZCAhPT0gJycgPyAzIDogMSkgOiAyCgkJCX0pCgkJfSwKCQljb21wdXRlQ2F0ZWdvcnlBbmRUYWcoYmxvZykgewoJCQlibG9nLmNhdGUgPSBibG9nLmNhdGVnb3J5LmlkCgkJCWJsb2cudGFnTGlzdCA9IFtdCgkJCWJsb2cudGFncy5mb3JFYWNoKGl0ZW0gPT4gewoJCQkJYmxvZy50YWdMaXN0LnB1c2goaXRlbS5pZCkKCQkJfSkKCQl9LAoJCXN1Ym1pdCgpIHsKCQkJaWYgKHRoaXMucmFkaW8gPT09IDMgJiYgKHRoaXMuZm9ybS5wYXNzd29yZCA9PT0gJycgfHwgdGhpcy5mb3JtLnBhc3N3b3JkID09PSBudWxsKSkgewoJCQkJcmV0dXJuIHRoaXMubXNnRXJyb3IoIuWvhueggeS/neaKpOaooeW8j+W/hemhu+Whq+WGmeWvhuegge+8gSIpCgkJCX0KCQkJdGhpcy4kcmVmcy5mb3JtUmVmLnZhbGlkYXRlKHZhbGlkID0+IHsKCQkJCWlmICh2YWxpZCkgewoJCQkJCWlmICh0aGlzLnJhZGlvID09PSAyKSB7CgkJCQkJCXRoaXMuZm9ybS5hcHByZWNpYXRpb24gPSBmYWxzZQoJCQkJCQl0aGlzLmZvcm0ucmVjb21tZW5kID0gZmFsc2UKCQkJCQkJdGhpcy5mb3JtLmNvbW1lbnRFbmFibGVkID0gZmFsc2UKCQkJCQkJdGhpcy5mb3JtLnRvcCA9IGZhbHNlCgkJCQkJCXRoaXMuZm9ybS5wdWJsaXNoZWQgPSBmYWxzZQoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMuZm9ybS5wdWJsaXNoZWQgPSB0cnVlCgkJCQkJfQoJCQkJCWlmICh0aGlzLnJhZGlvICE9PSAzKSB7CgkJCQkJCXRoaXMuZm9ybS5wYXNzd29yZCA9ICcnCgkJCQkJfQoJCQkJCWlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKCQkJCQkJdGhpcy5mb3JtLmNhdGVnb3J5ID0gbnVsbAoJCQkJCQl0aGlzLmZvcm0udGFncyA9IG51bGwKCQkJCQkJdXBkYXRlQmxvZyh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKCQkJCQkJCXRoaXMubXNnU3VjY2VzcyhyZXMubXNnKQoJCQkJCQkJdGhpcy4kcm91dGVyLnB1c2goJy9ibG9nL2xpc3QnKQoJCQkJCQl9KQoJCQkJCX0gZWxzZSB7CgkJCQkJCXNhdmVCbG9nKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewoJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKHJlcy5tc2cpCgkJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2Jsb2cvbGlzdCcpCgkJCQkJCX0pCgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQoJCQkJCXJldHVybiB0aGlzLm1zZ0Vycm9yKCfor7floavlhpnlv4XopoHnmoTooajljZXpobknKQoJCQkJfQoJCQl9KQoJCX0KCX0KfQo="},{"version":3,"sources":["WriteBlog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WriteBlog.vue","sourceRoot":"src/views/blog/blog","sourcesContent":["<template>\n\t<div>\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\n\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"文章标题\" prop=\"title\">\n\t\t\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"文章首图URL\" prop=\"firstPicture\">\n\t\t\t\t\t\t<el-input v-model=\"form.firstPicture\" placeholder=\"文章首图，用于随机文章展示\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t</el-row>\n\n\t\t\t<el-form-item label=\"文章描述\" prop=\"description\">\n\t\t\t\t<mavon-editor v-model=\"form.description\"/>\n\t\t\t</el-form-item>\n\n\t\t\t<el-form-item label=\"文章正文\" prop=\"content\">\n\t\t\t\t<mavon-editor v-model=\"form.content\"/>\n\t\t\t</el-form-item>\n\n\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"分类\" prop=\"cate\">\n\t\t\t\t\t\t<el-select v-model=\"form.cate\" placeholder=\"请选择分类（输入可添加新分类）\" :allow-create=\"true\" :filterable=\"true\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in categoryList\" :key=\"item.id\"></el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"标签\" prop=\"tagList\">\n\t\t\t\t\t\t<el-select v-model=\"form.tagList\" placeholder=\"请选择标签（输入可添加新标签）\" :allow-create=\"true\" :filterable=\"true\" :multiple=\"true\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in tagList\" :key=\"item.id\"></el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t</el-row>\n\n\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t<el-col :span=\"8\">\n\t\t\t\t\t<el-form-item label=\"字数\" prop=\"words\">\n\t\t\t\t\t\t<el-input v-model=\"form.words\" placeholder=\"请输入文章字数（自动计算阅读时长）\" type=\"number\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"8\">\n\t\t\t\t\t<el-form-item label=\"阅读时长(分钟)\" prop=\"readTime\">\n\t\t\t\t\t\t<el-input v-model=\"form.readTime\" placeholder=\"请输入阅读时长（可选）默认 Math.round(字数 / 200)\" type=\"number\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"8\">\n\t\t\t\t\t<el-form-item label=\"浏览次数\" prop=\"views\">\n\t\t\t\t\t\t<el-input v-model=\"form.views\" placeholder=\"请输入文章字数（可选）默认为 0\" type=\"number\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t</el-row>\n\n\t\t\t<el-form-item style=\"text-align: right;\">\n\t\t\t\t<el-button type=\"primary\" @click=\"dialogVisible=true\">保存</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\n\t\t<!--编辑可见性状态对话框-->\n\t\t<el-dialog title=\"博客可见性\" width=\"30%\" :visible.sync=\"dialogVisible\">\n\t\t\t<!--内容主体-->\n\t\t\t<el-form label-width=\"50px\" @submit.native.prevent>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-radio-group v-model=\"radio\">\n\t\t\t\t\t\t<el-radio :label=\"1\">公开</el-radio>\n\t\t\t\t\t\t<el-radio :label=\"2\">私密</el-radio>\n\t\t\t\t\t\t<el-radio :label=\"3\">密码保护</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"密码\" v-if=\"radio===3\">\n\t\t\t\t\t<el-input v-model=\"form.password\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item v-if=\"radio!==2\">\n\t\t\t\t\t<el-row>\n\t\t\t\t\t\t<el-col :span=\"6\">\n\t\t\t\t\t\t\t<el-switch v-model=\"form.appreciation\" active-text=\"赞赏\"></el-switch>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t<el-col :span=\"6\">\n\t\t\t\t\t\t\t<el-switch v-model=\"form.recommend\" active-text=\"推荐\"></el-switch>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t<el-col :span=\"6\">\n\t\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t<el-col :span=\"6\">\n\t\t\t\t\t\t\t<el-switch v-model=\"form.top\" active-text=\"置顶\"></el-switch>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t</el-row>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<!--底部-->\n\t\t\t<span slot=\"footer\">\n\t\t\t\t<el-button @click=\"dialogVisible=false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"submit\">保存</el-button>\n\t\t\t</span>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\n\timport Breadcrumb from \"@/components/Breadcrumb\";\n\timport {getCategoryAndTag, saveBlog, getBlogById, updateBlog} from '@/api/blog'\n\n\texport default {\n\t\tname: \"WriteBlog\",\n\t\tcomponents: {Breadcrumb},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcategoryList: [],\n\t\t\t\ttagList: [],\n\t\t\t\tdialogVisible: false,\n\t\t\t\tradio: 1,\n\t\t\t\tform: {\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tfirstPicture: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tcate: null,\n\t\t\t\t\ttagList: [],\n\t\t\t\t\twords: null,\n\t\t\t\t\treadTime: null,\n\t\t\t\t\tviews: 0,\n\t\t\t\t\tappreciation: false,\n\t\t\t\t\trecommend: false,\n\t\t\t\t\tcommentEnabled: false,\n\t\t\t\t\ttop: false,\n\t\t\t\t\tpublished: false,\n\t\t\t\t\tpassword: '',\n\t\t\t\t},\n\t\t\t\tformRules: {\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\n\t\t\t\t\tfirstPicture: [{required: true, message: '请输入首图链接', trigger: 'change'}],\n\t\t\t\t\tcate: [{required: true, message: '请选择分类', trigger: 'change'}],\n\t\t\t\t\ttagList: [{required: true, message: '请选择标签', trigger: 'change'}],\n\t\t\t\t\twords: [{required: true, message: '请输入文章字数', trigger: 'change'}],\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t'form.words'(newValue) {\n\t\t\t\tthis.form.readTime = newValue ? Math.round(newValue / 200) : null\n\t\t\t},\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getData()\n\t\t\tif (this.$route.params.id) {\n\t\t\t\tthis.getBlog(this.$route.params.id)\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetData() {\n\t\t\t\tgetCategoryAndTag().then(res => {\n\t\t\t\t\tthis.categoryList = res.data.categories\n\t\t\t\t\tthis.tagList = res.data.tags\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetBlog(id) {\n\t\t\t\tgetBlogById(id).then(res => {\n\t\t\t\t\tthis.computeCategoryAndTag(res.data)\n\t\t\t\t\tthis.form = res.data\n\t\t\t\t\tthis.radio = this.form.published ? (this.form.password !== '' ? 3 : 1) : 2\n\t\t\t\t})\n\t\t\t},\n\t\t\tcomputeCategoryAndTag(blog) {\n\t\t\t\tblog.cate = blog.category.id\n\t\t\t\tblog.tagList = []\n\t\t\t\tblog.tags.forEach(item => {\n\t\t\t\t\tblog.tagList.push(item.id)\n\t\t\t\t})\n\t\t\t},\n\t\t\tsubmit() {\n\t\t\t\tif (this.radio === 3 && (this.form.password === '' || this.form.password === null)) {\n\t\t\t\t\treturn this.msgError(\"密码保护模式必须填写密码！\")\n\t\t\t\t}\n\t\t\t\tthis.$refs.formRef.validate(valid => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (this.radio === 2) {\n\t\t\t\t\t\t\tthis.form.appreciation = false\n\t\t\t\t\t\t\tthis.form.recommend = false\n\t\t\t\t\t\t\tthis.form.commentEnabled = false\n\t\t\t\t\t\t\tthis.form.top = false\n\t\t\t\t\t\t\tthis.form.published = false\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.form.published = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.radio !== 3) {\n\t\t\t\t\t\t\tthis.form.password = ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.$route.params.id) {\n\t\t\t\t\t\t\tthis.form.category = null\n\t\t\t\t\t\t\tthis.form.tags = null\n\t\t\t\t\t\t\tupdateBlog(this.form).then(res => {\n\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\n\t\t\t\t\t\t\t\tthis.$router.push('/blog/list')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsaveBlog(this.form).then(res => {\n\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\n\t\t\t\t\t\t\t\tthis.$router.push('/blog/list')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dialogVisible = false\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单项')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\n</style>"]}]}