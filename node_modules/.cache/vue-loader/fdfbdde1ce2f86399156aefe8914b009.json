{"remainingRequest":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\pictureHosting\\UpyunManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\src\\views\\pictureHosting\\UpyunManage.vue","mtime":1675543272000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\zzzz\\Hhq_blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTdmdJY29uIGZyb20gIkAvY29tcG9uZW50cy9TdmdJY29uIjsKaW1wb3J0IHtnZXRCdWNrZXRDb250ZW50cywgZGVsRmlsZSwgdXBsb2FkfSBmcm9tICJAL2FwaS91cHl1biI7CmltcG9ydCB7aXNJbWdFeHR9IGZyb20gIkAvdXRpbC92YWxpZGF0ZSI7CmltcG9ydCB7cmFuZG9tVVVJRH0gZnJvbSAiQC91dGlsL3V1aWQiOwppbXBvcnQge2NvcHl9IGZyb20gIkAvdXRpbC9jb3B5IjsKCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICJVcHl1bk1hbmFnZSIsCgljb21wb25lbnRzOiB7U3ZnSWNvbn0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCXVweXVuQ29uZmlnOiB7CgkJCQl1c2VybmFtZTogJycsCgkJCQlwYXNzd29yZDogJycsCgkJCQlidWNrZXROYW1lOiAnJywKCQkJCWRvbWFpbjogJycKCQkJfSwKCQkJcGF0aEFycjogW3t2YWx1ZTogJycsIGxhYmVsOiAn5qC555uu5b2VJ31dLAoJCQlhY3RpdmVQYXRoOiBbJyddLC8v6buY6K6k6YCJ5Lit5qC555uu5b2VCgkJCXBhdGhQcm9wczogewoJCQkJbGF6eTogdHJ1ZSwKCQkJCWNoZWNrU3RyaWN0bHk6IHRydWUsCgkJCQlsYXp5TG9hZDogYXN5bmMgKG5vZGUsIHJlc29sdmUpID0+IHsKCQkJCQlsZXQgcGF0aCA9IG5vZGUucGF0aC5qb2luKCcvJykKCQkJCQlsZXQgbm9kZXMgPSBbXQoJCQkJCWF3YWl0IHRoaXMuZ2V0UmVwb3NDb250ZW50cyhub2RlcywgcGF0aCkKCQkJCQlyZXNvbHZlKG5vZGVzKQoJCQkJfQoJCQl9LAoJCQloaW50U2hvdzE6IHRydWUsCgkJCWhpbnRTaG93MjogdHJ1ZSwKCQkJZmlsZUxpc3Q6IFtdLAoJCQlpc0RyYXdlclNob3c6IGZhbHNlLAoJCQluYW1lVHlwZTogJzEnLAoJCQl1cGxvYWRMaXN0OiBbXSwKCQkJaXNDdXN0b21QYXRoOiBmYWxzZSwKCQkJY3VzdG9tUGF0aDogJycsCgkJfQoJfSwKCWNvbXB1dGVkOiB7CgkJcmVhbFBhdGgoKSB7CgkJCWlmICh0aGlzLmlzQ3VzdG9tUGF0aCkgewoJCQkJcmV0dXJuIGAvJHt0aGlzLmN1c3RvbVBhdGh9YAoJCQl9CgkJCXJldHVybiBgJHt0aGlzLmFjdGl2ZVBhdGguam9pbignLycpfS9gCgkJfQoJfSwKCWNyZWF0ZWQoKSB7CgkJdGhpcy5oaW50U2hvdzEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXB5dW5IaW50U2hvdzEnKSA/IGZhbHNlIDogdHJ1ZQoJCXRoaXMuaGludFNob3cyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VweXVuSGludFNob3cyJykgPyBmYWxzZSA6IHRydWUKCgkJY29uc3QgdXB5dW5Db25maWcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXB5dW5Db25maWcnKQoJCWlmICh1cHl1bkNvbmZpZykgewoJCQl0aGlzLnVweXVuQ29uZmlnID0gSlNPTi5wYXJzZSh1cHl1bkNvbmZpZykKCQl9IGVsc2UgewoJCQl0aGlzLm1zZ0Vycm9yKCfor7flhYjphY3nva7lj4jmi43kupEnKQoJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL3BpY3R1cmVIb3N0aW5nL3NldHRpbmcnKQoJCX0KCX0sCgltZXRob2RzOiB7CgkJLy/mjaLmiJDmh5LliqDovb0KCQlhc3luYyBnZXRSZXBvc0NvbnRlbnRzKGFyciwgcGF0aCkgewoJCQlhd2FpdCBnZXRCdWNrZXRDb250ZW50cyh0aGlzLnVweXVuQ29uZmlnLmJ1Y2tldE5hbWUsIHBhdGgpLnRoZW4ocmVzID0+IHsKCQkJCXJlcy5maWxlcy5mb3JFYWNoKGl0ZW0gPT4gewoJCQkJCWlmIChpdGVtLnR5cGUgPT09ICdmb2xkZXInKSB7CgkJCQkJCS8v6K6p5omA5pyJ6IqC54K56YO95piv6Z2e5Y+25a2Q6IqC54K5CgkJCQkJCWFyci5wdXNoKHt2YWx1ZTogaXRlbS5uYW1lLCBsYWJlbDogaXRlbS5uYW1lLCBsZWFmOiBmYWxzZX0pCgkJCQkJfQoJCQkJfSkKCQkJfSkKCQl9LAoJCXNlYXJjaCgpIHsKCQkJdGhpcy5maWxlTGlzdCA9IFtdCgkJCWxldCBwYXRoID0gdGhpcy5hY3RpdmVQYXRoLmpvaW4oJy8nKQoJCQlnZXRCdWNrZXRDb250ZW50cyh0aGlzLnVweXVuQ29uZmlnLmJ1Y2tldE5hbWUsIHBhdGgpLnRoZW4ocmVzID0+IHsKCQkJCXJlcy5maWxlcy5mb3JFYWNoKGl0ZW0gPT4gewoJCQkJCWlmIChpdGVtLnR5cGUgIT09ICdmb2xkZXInICYmIGlzSW1nRXh0KGl0ZW0ubmFtZSkpIHsKCQkJCQkJaXRlbS5wYXRoID0gdGhpcy5pbWdQYXRoKGl0ZW0pCgkJCQkJCWl0ZW0uY2RuX3VybCA9IHRoaXMuaW1nQ2RuVXJsKGl0ZW0pCgkJCQkJCXRoaXMuZmlsZUxpc3QucHVzaChpdGVtKQoJCQkJCX0KCQkJCX0pCgkJCX0pCgkJfSwKCQlub0Rpc3BsYXkoaWQpIHsKCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHVweXVuSGludFNob3cke2lkfWAsICcxJykKCQl9LAoJCWltZ1BhdGgoZmlsZSkgewoJCQlsZXQgcGF0aCA9IHRoaXMuYWN0aXZlUGF0aC5qb2luKCcvJykKCQkJcGF0aCA9IHBhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aCA6IGAvJHtwYXRofWAKCQkJcGF0aCA9IHBhdGguZW5kc1dpdGgoJy8nKSA/IHBhdGggOiBgJHtwYXRofS9gCgkJCXJldHVybiBgJHtwYXRofSR7ZmlsZS5uYW1lfWAKCQl9LAoJCWltZ0NkblVybChmaWxlKSB7CgkJCXJldHVybiBgJHt0aGlzLnVweXVuQ29uZmlnLmRvbWFpbn0ke3RoaXMuaW1nUGF0aChmaWxlKX1gCgkJfSwKCQljb3B5KHR5cGUsIGZpbGUpIHsKCQkJLy8gdHlwZSAxIGNkbiBsaW5rICAyIE1hcmtkb3duCgkJCWxldCBjb3B5Q29udCA9ICcnCgkJCWlmICh0eXBlID09IDEpIHsKCQkJCWNvcHlDb250ID0gZmlsZS5jZG5fdXJsCgkJCX0gZWxzZSBpZiAodHlwZSA9PSAyKSB7CgkJCQljb3B5Q29udCA9IGAhWyR7ZmlsZS5uYW1lfV0oJHtmaWxlLmNkbl91cmx9KWAKCQkJfQoJCQljb3B5KGNvcHlDb250KQoJCQl0aGlzLm1zZ1N1Y2Nlc3MoJ+WkjeWItuaIkOWKnycpCgkJfSwKCQlkZWxGaWxlKGZpbGUpIHsKCQkJdGhpcy4kY29uZmlybSgi5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbliKDpmaQ/IiwgIuaPkOekuiIsIHsKCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJdHlwZTogJ3dhcm5pbmcnLAoJCQl9KS50aGVuKCgpID0+IHsKCQkJCWRlbEZpbGUodGhpcy51cHl1bkNvbmZpZy5idWNrZXROYW1lLCBmaWxlLnBhdGgpLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMubXNnU3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKCQkJCQl0aGlzLnNlYXJjaCgpCgkJCQl9KQoJCQl9KS5jYXRjaCgoKSA9PiB7CgkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQl0eXBlOiAnaW5mbycsCgkJCQkJbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcsCgkJCQl9KQoJCQl9KQoJCX0sCgkJc3VibWl0VXBsb2FkKCkgewoJCQkvL2h0dHBzOi8vZ2l0aHViLmNvbS9FbGVtZUZFL2VsZW1lbnQvaXNzdWVzLzEyMDgwCgkJCXRoaXMudXBsb2FkTGlzdCA9IHRoaXMuJHJlZnMudXBsb2FkUmVmLnVwbG9hZEZpbGVzCgkJCWlmICh0aGlzLnVwbG9hZExpc3QubGVuZ3RoKSB7CgkJCQkvL+inpuWPkSBlbC11cGxvYWQg5LitIGh0dHAtcmVxdWVzdCDnu5HlrprnmoTlh73mlbAKCQkJCXRoaXMuJHJlZnMudXBsb2FkUmVmLnN1Ym1pdCgpCgkJCX0gZWxzZSB7CgkJCQl0aGlzLm1zZ0Vycm9yKCfor7flhYjpgInmi6nmlofku7YnKQoJCQl9CgkJfSwKCQl1cGxvYWQoZGF0YSkgewoJCQlsZXQgZmlsZU5hbWUgPSBkYXRhLmZpbGUubmFtZQoJCQlpZiAodGhpcy5uYW1lVHlwZSA9PT0gJzInKSB7CgkJCQlmaWxlTmFtZSA9IHJhbmRvbVVVSUQoKSArIGZpbGVOYW1lLnN1YnN0cihmaWxlTmFtZS5sYXN0SW5kZXhPZigiLiIpKQoJCQl9CgoJCQl1cGxvYWQodGhpcy51cHl1bkNvbmZpZy5idWNrZXROYW1lLCB0aGlzLnJlYWxQYXRoLCBmaWxlTmFtZSwgZGF0YS5maWxlKS50aGVuKCgpID0+IHsKCQkJCXRoaXMubXNnU3VjY2Vzcygn5LiK5Lyg5oiQ5YqfJykKCQkJCWRhdGEub25TdWNjZXNzKCkKCQkJfSkKCQl9LAoJfSwKfQo="},{"version":3,"sources":["UpyunManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpyunManage.vue","sourceRoot":"src/views/pictureHosting","sourcesContent":["<template>\n\t<div>\n\t\t<el-row>\n\t\t\t<el-select v-model=\"upyunConfig.bucketName\" disabled style=\"min-width: 200px\"></el-select>\n\t\t\t<el-cascader v-model=\"activePath\" placeholder=\"请选择目录\" :options=\"pathArr\" :props=\"pathProps\" style=\"min-width: 450px\"></el-cascader>\n\t\t\t<el-button type=\"primary\" size=\"medium\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\n\t\t\t<el-button class=\"right-item\" type=\"primary\" size=\"medium\" icon=\"el-icon-upload\" @click=\"isDrawerShow=!isDrawerShow\">上传</el-button>\n\t\t</el-row>\n\t\t<el-alert title=\"只显示<img>标签支持的 apng,avif,bmp,gif,ico,cur,jpg,jpeg,jfif,pjpeg,pjp,png,svg,tif,tiff,webp 格式的图片，见 https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img\" type=\"warning\" show-icon close-text=\"不再提示\" v-if=\"hintShow1\" @close=\"noDisplay(1)\"></el-alert>\n\t\t<el-alert title=\"最多显示100个文件\" type=\"warning\" show-icon close-text=\"不再提示\" v-if=\"hintShow2\" @close=\"noDisplay(2)\"></el-alert>\n\t\t<el-row v-viewer>\n\t\t\t<div class=\"image-container\" v-for=\"(file,index) in fileList\" :key=\"index\">\n\t\t\t\t<el-image :src=\"file.cdn_url\" fit=\"scale-down\"></el-image>\n\t\t\t\t<div class=\"image-content\">\n\t\t\t\t\t<div class=\"info\">\n\t\t\t\t\t\t<span>{{ file.name }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"icons\">\n\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"复制CDN链接\" placement=\"bottom\">\n\t\t\t\t\t\t\t<i class=\"icon el-icon-link\" @click=\"copy(1,file)\"></i>\n\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"复制MD格式\" placement=\"bottom\">\n\t\t\t\t\t\t\t<SvgIcon icon-class=\"markdown\" class-name=\"icon\" @click=\"copy(2,file)\"></SvgIcon>\n\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t<i class=\"icon el-icon-delete\" @click=\"delFile(file)\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-row>\n\n\t\t<el-drawer title=\"上传文件\" :visible.sync=\"isDrawerShow\" direction=\"rtl\" size=\"40%\" :wrapperClosable=\"false\" :close-on-press-escape=\"false\">\n\t\t\t<el-row>\n\t\t\t\t<el-radio v-model=\"nameType\" label=\"1\">使用源文件名</el-radio>\n\t\t\t\t<el-radio v-model=\"nameType\" label=\"2\">使用UUID文件名</el-radio>\n\t\t\t\t<el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\" v-throttle=\"[submitUpload,`click`,3000]\">确定上传</el-button>\n\t\t\t</el-row>\n\t\t\t<el-row>\n\t\t\t\t当前目录：{{ realPath }}\n\t\t\t</el-row>\n\t\t\t<el-row>\n\t\t\t\t<el-switch v-model=\"isCustomPath\" active-text=\"自定义目录\"></el-switch>\n\t\t\t\t<el-input placeholder=\"例：oldFolder/newFolder/\" v-model=\"customPath\" :disabled=\"!isCustomPath\" size=\"medium\" style=\"margin-top: 10px\"></el-input>\n\t\t\t</el-row>\n\t\t\t<el-upload ref=\"uploadRef\" action=\"\" :http-request=\"upload\" drag multiple :file-list=\"uploadList\" list-type=\"picture\" :auto-upload=\"false\">\n\t\t\t\t<i class=\"el-icon-upload\"></i>\n\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n\t\t\t</el-upload>\n\t\t</el-drawer>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from \"@/components/SvgIcon\";\nimport {getBucketContents, delFile, upload} from \"@/api/upyun\";\nimport {isImgExt} from \"@/util/validate\";\nimport {randomUUID} from \"@/util/uuid\";\nimport {copy} from \"@/util/copy\";\n\nexport default {\n\tname: \"UpyunManage\",\n\tcomponents: {SvgIcon},\n\tdata() {\n\t\treturn {\n\t\t\tupyunConfig: {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\tbucketName: '',\n\t\t\t\tdomain: ''\n\t\t\t},\n\t\t\tpathArr: [{value: '', label: '根目录'}],\n\t\t\tactivePath: [''],//默认选中根目录\n\t\t\tpathProps: {\n\t\t\t\tlazy: true,\n\t\t\t\tcheckStrictly: true,\n\t\t\t\tlazyLoad: async (node, resolve) => {\n\t\t\t\t\tlet path = node.path.join('/')\n\t\t\t\t\tlet nodes = []\n\t\t\t\t\tawait this.getReposContents(nodes, path)\n\t\t\t\t\tresolve(nodes)\n\t\t\t\t}\n\t\t\t},\n\t\t\thintShow1: true,\n\t\t\thintShow2: true,\n\t\t\tfileList: [],\n\t\t\tisDrawerShow: false,\n\t\t\tnameType: '1',\n\t\t\tuploadList: [],\n\t\t\tisCustomPath: false,\n\t\t\tcustomPath: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\trealPath() {\n\t\t\tif (this.isCustomPath) {\n\t\t\t\treturn `/${this.customPath}`\n\t\t\t}\n\t\t\treturn `${this.activePath.join('/')}/`\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.hintShow1 = localStorage.getItem('upyunHintShow1') ? false : true\n\t\tthis.hintShow2 = localStorage.getItem('upyunHintShow2') ? false : true\n\n\t\tconst upyunConfig = localStorage.getItem('upyunConfig')\n\t\tif (upyunConfig) {\n\t\t\tthis.upyunConfig = JSON.parse(upyunConfig)\n\t\t} else {\n\t\t\tthis.msgError('请先配置又拍云')\n\t\t\tthis.$router.push('/pictureHosting/setting')\n\t\t}\n\t},\n\tmethods: {\n\t\t//换成懒加载\n\t\tasync getReposContents(arr, path) {\n\t\t\tawait getBucketContents(this.upyunConfig.bucketName, path).then(res => {\n\t\t\t\tres.files.forEach(item => {\n\t\t\t\t\tif (item.type === 'folder') {\n\t\t\t\t\t\t//让所有节点都是非叶子节点\n\t\t\t\t\t\tarr.push({value: item.name, label: item.name, leaf: false})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsearch() {\n\t\t\tthis.fileList = []\n\t\t\tlet path = this.activePath.join('/')\n\t\t\tgetBucketContents(this.upyunConfig.bucketName, path).then(res => {\n\t\t\t\tres.files.forEach(item => {\n\t\t\t\t\tif (item.type !== 'folder' && isImgExt(item.name)) {\n\t\t\t\t\t\titem.path = this.imgPath(item)\n\t\t\t\t\t\titem.cdn_url = this.imgCdnUrl(item)\n\t\t\t\t\t\tthis.fileList.push(item)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tnoDisplay(id) {\n\t\t\tlocalStorage.setItem(`upyunHintShow${id}`, '1')\n\t\t},\n\t\timgPath(file) {\n\t\t\tlet path = this.activePath.join('/')\n\t\t\tpath = path.startsWith('/') ? path : `/${path}`\n\t\t\tpath = path.endsWith('/') ? path : `${path}/`\n\t\t\treturn `${path}${file.name}`\n\t\t},\n\t\timgCdnUrl(file) {\n\t\t\treturn `${this.upyunConfig.domain}${this.imgPath(file)}`\n\t\t},\n\t\tcopy(type, file) {\n\t\t\t// type 1 cdn link  2 Markdown\n\t\t\tlet copyCont = ''\n\t\t\tif (type == 1) {\n\t\t\t\tcopyCont = file.cdn_url\n\t\t\t} else if (type == 2) {\n\t\t\t\tcopyCont = `![${file.name}](${file.cdn_url})`\n\t\t\t}\n\t\t\tcopy(copyCont)\n\t\t\tthis.msgSuccess('复制成功')\n\t\t},\n\t\tdelFile(file) {\n\t\t\tthis.$confirm(\"此操作将永久删除该文件, 是否删除?\", \"提示\", {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning',\n\t\t\t}).then(() => {\n\t\t\t\tdelFile(this.upyunConfig.bucketName, file.path).then(() => {\n\t\t\t\t\tthis.msgSuccess('删除成功')\n\t\t\t\t\tthis.search()\n\t\t\t\t})\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$message({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: '已取消删除',\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsubmitUpload() {\n\t\t\t//https://github.com/ElemeFE/element/issues/12080\n\t\t\tthis.uploadList = this.$refs.uploadRef.uploadFiles\n\t\t\tif (this.uploadList.length) {\n\t\t\t\t//触发 el-upload 中 http-request 绑定的函数\n\t\t\t\tthis.$refs.uploadRef.submit()\n\t\t\t} else {\n\t\t\t\tthis.msgError('请先选择文件')\n\t\t\t}\n\t\t},\n\t\tupload(data) {\n\t\t\tlet fileName = data.file.name\n\t\t\tif (this.nameType === '2') {\n\t\t\t\tfileName = randomUUID() + fileName.substr(fileName.lastIndexOf(\".\"))\n\t\t\t}\n\n\t\t\tupload(this.upyunConfig.bucketName, this.realPath, fileName, data.file).then(() => {\n\t\t\t\tthis.msgSuccess('上传成功')\n\t\t\t\tdata.onSuccess()\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style>\n.el-drawer__body {\n\tmargin: 0 20px;\n\toverflow: auto;\n}\n\n.el-drawer__body .el-upload {\n\tmargin-top: 20px;\n}\n\n.el-drawer__body .el-upload, .el-drawer__body .el-upload-dragger {\n\twidth: 100%;\n}\n</style>\n\n<style scoped>\n.el-row + .el-row, .el-row + .el-alert, .el-alert + .el-row {\n\tmargin-top: 20px;\n}\n\n.el-alert + .el-alert {\n\tmargin-top: 10px;\n}\n\n.el-select + .el-cascader, .el-cascader + .el-button, .el-button + .el-switch {\n\tmargin-left: 10px;\n}\n\n.el-switch + .el-button {\n\tmargin-left: 30px;\n}\n\n.image-container {\n\tposition: relative;\n\twidth: 200px;\n\theight: 200px;\n\toverflow: hidden;\n\tdisplay: inline-block;\n\tmargin: 0 2px;\n}\n\n.el-image {\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n.image-content {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.image-content .info {\n\tbackground: linear-gradient(0deg, transparent, rgba(0, 0, 0, .6));\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tpadding: 6px;\n\tfont-size: 12px;\n\tcolor: #fff;\n\topacity: 0;\n\ttransition: opacity 0.5s;\n\tz-index: 2;\n}\n\n.image-content .info span {\n\tword-wrap: break-word;\n}\n\n.image-container:hover .image-content .info {\n\topacity: 1;\n\ttransition-duration: 0.25s;\n}\n\n.icons {\n\tposition: absolute;\n\tright: 8px;\n\tbottom: 8px;\n\tz-index: 2;\n}\n\n.icon {\n\ttext-decoration: none;\n\tfont-size: 22px;\n\tmargin-left: 20px;\n\ttransform: translateY(80px);\n\tcursor: pointer;\n}\n\n.image-container:hover .icon {\n\ttransform: translateY(0px);\n}\n\n.icon:nth-child(1) {\n\ttransition: transform 0.25s 0.05s, color 0.3s;\n}\n\n.icon:nth-child(2) {\n\ttransition: transform 0.25s 0.1s, color 0.3s;\n}\n\n.icon:nth-child(3) {\n\ttransition: transform 0.25s 0.15s, color 0.3s;\n}\n\n.icon:nth-child(1):hover {\n\tcolor: #409EFF;\n}\n\n.icon:nth-child(2):hover {\n\tcolor: #409EFF;\n}\n\n.icon:nth-child(3):hover {\n\tcolor: #F56C6C;\n}\n\n.image-content::before {\n\tcontent: '';\n\tposition: absolute;\n\tleft: 0;\n\tbottom: 0;\n\tbackground: rgba(255, 255, 255, 0.7);\n\twidth: 100%;\n\theight: 0;\n\tclip-path: polygon(0 100%, 100% 0, 100% 100%);\n\ttransition: 0.3s;\n\tz-index: 2;\n}\n\n.image-container:hover .image-content::before {\n\theight: 80px;\n}\n</style>"]}]}